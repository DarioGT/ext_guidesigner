<html>
	<head>
		<link rel="stylesheet" type="text/css" href="../extjs/resources/css/ext-all.css" />
		<script type="text/javascript" src="../extjs/adapter/ext/ext-base.js"></script>
		<script type="text/javascript" src="../extjs/ext-all-debug.js"></script>

		<script src="../lib/Test/Builder.js" type="text/javascript"></script>
		<script src="../lib/Test/More.js" type="text/javascript"></script>

		<!--The custom script to test -->
		<script src="../js/Ext.ux.Util.js" type="text/javascript"></script>
		<script src="../js/Ext.ux.Json.js" type="text/javascript"></script>

		<!--The test function that fires when body is loaded -->
		<script>
			Ext.onReady(function(){
				plan({ tests: 8 });

				//diag('Basic operations:');
				var a = Ext.ux.JSON.decode('{ str : "string", arr : ["A1","A2"], num : .8, obj : { key1 : "value1", key2 : [1,2]} }');

				is(a.str,'string', 'String parsed');
				ok(a.arr[0] == 'A1' && a.arr[1] == 'A2', 'Array parsed');
				is(a.num,.8, 'Num parsed');
				
				ok( typeof a.obj == 'object', "Object parsed");
				var o = a.obj;
				is(o.key1, 'value1', "property parsed");
				
				try {
					a = Ext.ux.JSON.decode('{ {{ }');
				} catch (e) {
					isaOK(e,'SyntaxError', 'SyntaxError throwed');					
				}
				
				a = Ext.ux.JSON.decode('{\
					scope : this,\
					handler : function (){\
						handler\
					},\
					xtype : \'gmappanel\'\
			 	}');
			 	
			 	is(a.scope, 'this', "this stringified1");
			 	is(a.__JSON__scope, 'this', "this stringified2");
			 	
				 
			});
		</script>
	</head>

 	<body>
		<H1>Ext.ux.Json test suite</H1>
	</body>
 </html>